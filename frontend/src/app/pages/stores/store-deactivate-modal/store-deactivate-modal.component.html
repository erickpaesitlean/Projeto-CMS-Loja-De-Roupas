@if (isOpen) {
  <div class="modal-overlay" (click)="onClose()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>{{ store.status === 'ATIVA' ? 'Inativar Loja' : 'Ativar Loja' }}</h3>
        <button class="close-btn" (click)="onClose()" type="button" aria-label="Fechar">
          <app-icon name="x" [size]="20" color="#64748b" />
        </button>
      </div>

      <div class="modal-body">
        <p class="modal-description">
          Você está prestes a {{ store.status === 'ATIVA' ? 'inativar' : 'ativar' }} a loja <strong>{{ store.nome }}</strong>.
        </p>

        @if (loading()) {
          <div class="loading-state">
            <div class="spinner"></div>
            <p>Verificando produtos e estoque...</p>
          </div>
        } @else if (hasProducts) {
          <div class="warning-box">
            <app-icon name="alert-triangle" [size]="24" color="#f59e0b" />
            <div>
              <strong>Esta loja possui {{ products().length }} produto(s) com estoque.</strong>
              <p>Total de unidades em estoque: <strong>{{ totalStock() }}</strong></p>
              @if (store.status === 'ATIVA') {
                <p class="warning-text">
                  Ao inativar, os estoques desta loja não serão mais considerados como disponíveis para venda.
                </p>
              } @else {
                <p class="info-text">
                  Ao ativar, os estoques desta loja voltarão a ser considerados como disponíveis.
                </p>
              }
            </div>
          </div>
        } @else {
          <div class="info-box">
            <app-icon name="info" [size]="24" color="#3b82f6" />
            <p>Esta loja não possui produtos com estoque cadastrado.</p>
          </div>
        }
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="onClose()">Cancelar</button>
        <button
          type="button"
          class="btn btn-primary"
          (click)="onConfirm()"
        >
          {{ store.status === 'ATIVA' ? 'Confirmar Inativação' : 'Confirmar Ativação' }}
        </button>
      </div>
    </div>
  </div>
}







